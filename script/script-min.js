function jsGetJSON(e,t){$.ajax({url:jsonURL+e,type:"GET",data:null,dataType:"json",success:function(e){t(e)}})}function jsGetPosts(e,t){console.log("getting posts from "+ajaxURL),e.action="get_posts",$.ajax({url:ajaxURL,type:"POST",data:e,dataType:"json",success:function(e){t(e)}})}function getHistory(){}function setHistory(){}function youtube_parser(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return!(!n||11!==n[7].length)&&n[7]}function onPlayerReady(){player.mute(),player.playVideo()}function onYouTubePlayerAPIReady(){player=new YT.Player("ytplayer",{videoId:youtube_parser($ytplayer.attr("data-src")),modestbranding:1,controls:0,showinfo:0,events:{onReady:onPlayerReady,onStateChange:function(e){e.data===YT.PlayerState.PLAYING&&$wrapper.addClass("playing"),e.data===YT.PlayerState.ENDED&&player.playVideo()}}})}function loadInners(e,t,n){var r=e.attr("data-a-o"),o="ovelse/?filter[orderby]=post__in";if(r.length){for(r=r.split(","),i=0;i<r.length;i++)o+="&filter[post__in][]="+r[i];jsRenderModule({endpoint:o,template:"jsTemplate-inner-article",target:t+" .main-article",overwrite:!1},function(){"function"==typeof n&&n()})}}function jsRenderModule(e,t){$(e.target).addClass("loading"),jsGetJSON(e.endpoint,function(n){if(404!==n.status){for(var i=$.templates("#"+e.template),r=$('meta[name="post-id"]').attr("content"),o=0;o<n.length;o++)r==n[o].id&&(n[o].isCurpost=!0);var a=i.render(n);if("undefined"==typeof e.overwrite||e.overwrite!==!1?$(e.target).empty().html(a).removeClass("loading"):$(e.target).append(a).removeClass("loading"),"undefined"!=typeof e.addHeader||e.addHeader===!0){var s=[{type:n[0].type}],l=$.templates("#jsTemplate-article-page-header").render(s);$(e.target).prepend(l)}"function"==typeof t&&t()}})}function setAttachInputNames(){$("#attach-ovelse-list li").each(function(e){var t=$(this),n=t.find('input[type="hidden"]');n.attr("name","attach_ovelse["+e+"]")})}function sortAttach(e){var t=document.getElementById(e);if(null!==t)var n=Sortable.create(t,{animation:70,onUpdate:function(){setAttachInputNames()}})}function dropzoneInput(){$("fieldset.file-upload").each(function(){var e=$(this),t=e.find(".file-upload-dz"),n=t.attr("data-url"),i=e.parents("form"),r=t.dropzone({url:ajaxURL,maxFiles:t.attr("data-max"),acceptedFiles:"image/*",thumbnailWidth:140,thumbnailHeight:130,addRemoveLinks:!0,dictRemoveFile:"x",sending:function(e,t,n){n.append("action","file_upload")},init:function(){var e=this,n={name:"myimage.jpg",size:12345,type:"image/jpeg",status:Dropzone.ADDED,accepted:!0,mock:!0};if(t.hasClass("cover-photo")){var r=i.find('input[name="coverphoto"]').attr("data-url"),o=i.find('input[name="coverphoto"]').val();"undefined"!=typeof r&&(t.addClass("dz-max-files-reached"),n.url=r,n.id=o,e.emit("addedfile",n),e.emit("complete",n),e.emit("success",n),e.emit("thumbnail",n,r),e.files.push(n),i.find('input[name="coverphoto"]').removeAttr("data-url"))}else{var a=0;i.find('input[name="images[]"]').each(function(){n.url=$(this).attr("data-url")||void 0,n.id=$(this).val()||void 0,"undefined"!=typeof n.url&&"undefined"!=typeof n.url?(a++,e.emit("addedfile",n),e.emit("complete",n),e.emit("success",n),e.emit("thumbnail",n,n.url),e.files.push(n),$(this).removeAttr("data-url")):$(this).remove()}),a>=4&&t.addClass("dz-max-files-reached")}},success:function(e,n){if("undefined"!=typeof e.id&&$(e.previewElement).attr("data-id",e.id),!e.mock){var r=n.files[0].id;if("undefined"!=typeof r&&$(e.previewElement).attr("data-id",r),t.hasClass("cover-photo")){var o=i.find('input[name="coverphoto"]');o.length||(o=$('<input type="hidden" name="coverphoto" class="image-id" id="image-'+r+'">'),i.prepend(o)),o.val(r)}else{var o=$('<input type="hidden" name="images[]" class="image-id" id="image-'+r+'" value="'+r+'">');i.append(o)}}}})}),$("body").on("click",".dz-preview",function(e){var t=$(e.target).parents(".dz-preview"),n=t.attr("data-id"),i=t.parents(".file-upload-dz"),r=t.parents("form");$("input#image-"+n).remove(),t.remove(),i.removeClass("dz-max-files-reached");var o={action:"file_upload",delete:n};"0"!==r.find('input[name="post-id"]').val()&&(o.post_id=r.find('input[name="post-id"]').val()),$.ajax({url:ajaxURL,type:"POST",data:o,dataType:"json",success:function(e){}})})}function typeselect(e){var t=e.children('input[type="text"]'),n=e.children('input[type="hidden"]'),i=e.children(".input-btn"),r=e.children("ul");i.off().on("click",function(t){t.preventDefault(),r.children("li").addClass("visible").removeClass("hidden"),e.toggleClass("show-list").removeClass("invalid"),r.children(".no-match").addClass("hidden").removeClass("visible")}),r.off().on("click li",function(i){var o=$(i.target);o.hasClass("no-match")||(t.val(o.html()),n.val(o.attr("data-option")),r.children(".selected").removeClass("selected"),o.addClass("selected"),e.removeClass("show-list"))}),t.off().on("keyup",function(n){if(13===n.which||32===n.which);else if(38===n.which){n.preventDefault();var i=r.children("li.selected");if(i.length){i.removeClass("selected");var o=i.prevAll(".visible").first();o.length?o.addClass("selected"):r.children(".visible").last().addClass("selected")}else r.children("li.visible").last().addClass("selected")}else if(40===n.which){n.preventDefault();var i=r.children("li.selected");if(i.length){i.removeClass("selected");var a=i.nextAll(".visible").first();a.length?a.addClass("selected"):r.children(".visible").first().addClass("selected")}else r.children("li.visible").first().addClass("selected")}else{var s=t.val();if(s.length>0){r.children(".selected").removeClass("selected"),e.addClass("show-list").removeClass("invalid"),r.children(".no-match").addClass("hidden").removeClass("visible");var l=0;r.children("li").each(function(e){$(this).html().toLowerCase().indexOf(s.toLocaleLowerCase()||$(this).hasClass("no-match"))<0?$(this).addClass("hidden").removeClass("visible"):($(this).addClass("visible").removeClass("hidden"),l++)}),l<1&&r.children(".no-match").addClass("visible").removeClass("hidden")}else e.removeClass("show-list")}}),t.on("keydown",function(i){if(13===i.which||32===i.which){i.preventDefault();var o=r.children("li.selected");o.length&&(t.val(o.html()),n.val(o.attr("data-option")),e.removeClass("show-list"))}}),t.on("blur",function(){e.removeClass("show-list");var n=t.val(),i=0;r.children("li").each(function(){$(this).hasClass("no-match")||$(this).html()!==n||i++}),i<1&&e.addClass("invalid")})}var jsonURL;$(function(){jsonURL=$('link[rel="https://api.w.org/"]').attr("href")+"wp/v2/"});var ajaxURL;$(function(){ajaxURL=$('meta[name="ajaxURL"]').attr("content")}),!function(e,t){var n=t.jQuery;"object"==typeof exports?module.exports=n?e(t,n):function(n){if(n&&!n.fn)throw"Provide jQuery or null";return e(t,n)}:"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t,!1)}(function(e,t){"use strict";function n(e,t){return function(){var n,i=this,r=i.base;return i.base=e,n=t.apply(i,arguments),i.base=r,n}}function i(e,t){return ee(t)&&(t=n(e?e._d?e:n(a,e):a,t),t._d=1),t}function r(e,t){for(var n in t.props)ke.test(n)&&(e[n]=i(e[n],t.props[n]))}function o(e){return e}function a(){return""}function s(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}function l(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function d(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t,n){return e?te(e)?u.apply(Z,e):(se.delimiters=[e,t,fe=n?n.charAt(0):fe],ue=e.charAt(0),ce=e.charAt(1),pe=t.charAt(0),he=t.charAt(1),e="\\"+ue+"(\\"+fe+")?\\"+ce,t="\\"+pe+"\\"+he,G="(?:(\\w+(?=[\\/\\s\\"+pe+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+pe+"]|\\"+pe+"(?!\\"+he+"))*?)",ae.rTag="(?:"+G+")",G=new RegExp("(?:"+e+G+"(\\/)?|\\"+ue+"(\\"+fe+")?\\"+ce+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),ae.rTmpl=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),de):se.delimiters}function c(e,t){t||e===!0||(t=e,e=void 0);var n,i,r,o,a=this,s=!t||"root"===t;if(e){if(o=t&&a.type===t&&a,!o)if(n=a.views,a._.useKey){for(i in n)if(o=t?n[i].get(e,t):n[i])break}else for(i=0,r=n.length;!o&&r>i;i++)o=t?n[i].get(e,t):n[i]}else if(s)for(;a.parent;)o=a,a=a.parent;else for(;a&&!o;)o=a.type===t?a:void 0,a=a.parent;return o}function p(){var e=this.get("item");return e?e.index:void 0}function h(){return this.index}function f(t,n){var i,r,o=this,a=o.ctx;if(a&&(a=a[t]),void 0===a&&(a=re[t]),a&&a._cp){if(n)return r=ae._ceo(a[1].deps),r.unshift(a[0].data),r._cp=!0,r;a=Z.getCtx(a)}return a&&ee(a)&&!a._wrp&&(i=function(){return a.apply(this&&this!==e?this:o,arguments)},i._wrp=o,d(i,a)),i||a}function m(e){return e&&(e.fn?e:this.getRsc("templates",e)||ne(e))}function g(e,t,n,i){var o,a,s="number"==typeof n&&t.tmpl.bnds[n-1],l=t.linkCtx;return void 0!==i?n=i={props:{},args:[i]}:s&&(n=s(t.data,t,ae)),a=n.args[0],(e||s)&&(o=l&&l.tag,o||(o=d(new ae._tg,{_:{inline:!l,bnd:s,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:n}),l&&(l.tag=o,o.linkCtx=l),n.ctx=q(n.ctx,(l?l.view:t).ctx)),o._er=i&&a,r(o,n),n.view=t,o.ctx=n.ctx||o.ctx||{},n.ctx=void 0,a=o.cvtArgs("true"!==e&&e)[0],a=s&&t._.onRender?t._.onRender(a,t,o):a),void 0!=a?a:""}function v(e){var t=this,n=t.tagCtx,i=n.view,r=n.args;return e=e||t.convert,e=e&&(""+e===e?i.getRsc("converters",e)||j("Unknown converter: '"+e+"'"):e),r=r.length||n.index?e?r.slice():r:[i.data],e&&(e.depends&&(t.depends=ae.getDeps(t.depends,t,e.depends,e)),r[0]=e.apply(t,r)),r}function y(e,t){for(var n,i,r=this;void 0===n&&r;)i=r.tmpl&&r.tmpl[e],n=i&&i[t],r=r.parent;return n||Z[e][t]}function w(e,t,n,i,o,a){t=t||J;var s,l,d,u,c,p,h,f,m,g,v,y,w,b,C,_,x,T,E,F="",k=t.linkCtx||0,D=t.ctx,S=n||t.tmpl,z="number"==typeof i&&t.tmpl.bnds[i-1];for("tag"===e._is?(s=e,e=s.tagName,i=s.tagCtxs,d=s.template):(l=t.getRsc("tags",e)||j("Unknown tag: {{"+e+"}} "),d=l.template),void 0!==a?(F+=a,i=a=[{props:{},args:[]}]):z&&(i=z(t.data,t,ae)),f=i.length,h=0;f>h;h++)g=i[h],(!k||!k.tag||h&&!k.tag._.inline||s._er)&&((y=S.tmpls&&g.tmpl)&&(y=g.content=S.tmpls[y-1]),g.index=h,g.tmpl=y,g.render=L,g.view=t,g.ctx=q(g.ctx,D)),(n=g.props.tmpl)&&(g.tmpl=t.getTmpl(n)),s||(s=new l._ctr,w=!!s.init,s.parent=p=D&&D.tag,s.tagCtxs=i,E=s.dataMap,k&&(s._.inline=!1,k.tag=s,s.linkCtx=k),(s._.bnd=z||k.fn)?s._.arrVws={}:s.dataBoundOnly&&j("{^{"+e+"}} tag must be data-bound")),i=s.tagCtxs,E=s.dataMap,g.tag=s,E&&i&&(g.map=i[h].map),s.flow||(v=g.ctx=g.ctx||{},u=s.parents=v.parentTags=D&&q(v.parentTags,D.parentTags)||{},p&&(u[p.tagName]=p),u[s.tagName]=v.tag=s);if(!(s._er=a)){for(r(s,i[0]),s.rendering={},h=0;f>h;h++)g=s.tagCtx=i[h],x=g.props,_=s.cvtArgs(),(b=x.dataMap||E)&&(_.length||x.dataMap)&&(C=g.map,C&&C.src===_[0]&&!o||(C&&C.src&&C.unmap(),C=g.map=b.map(_[0],x,void 0,!s._.bnd)),_=[C.tgt]),s.ctx=g.ctx,h||(w&&(T=s.template,s.init(g,k,s.ctx),w=void 0),k&&(k.attr=s.attr=k.attr||s.attr),c=s.attr,s._.noVws=c&&c!==Le),m=void 0,s.render&&(m=s.render.apply(s,_)),_.length||(_=[t]),void 0===m&&(m=g.render(_[0],!0)||(o?void 0:"")),F=F?F+(m||""):m;s.rendering=void 0}return s.tagCtx=i[0],s.ctx=s.tagCtx.ctx,s._.noVws&&s._.inline&&(F="text"===c?ie.html(F):""),z&&t._.onRender?t._.onRender(F,t,s):F}function b(e,t,n,i,r,o,a,s){var l,d,u,c=this,h="array"===t;c.content=s,c.views=h?[]:{},c.parent=n,c.type=t||"top",c.data=i,c.tmpl=r,u=c._={key:0,useKey:h?0:1,id:""+Se++,onRender:a,bnds:{}},c.linked=!!a,n?(l=n.views,d=n._,d.useKey?(l[u.key="_"+d.useKey++]=c,c.index=Ue,c.getIndex=p):l.length===(u.key=c.index=o)?l.push(c):l.splice(o,0,c),c.ctx=e||n.ctx):c.ctx=e}function C(e){var t,n,i;for(t in He)n=t+"s",e[n]&&(i=e[n],e[n]={},Z[n](i,e))}function _(e,t,n){function r(){var t=this;t._={inline:!0,unlinked:!0},t.tagName=e}var o,a,s,l=new ae._tg;if(ee(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),a=t.baseTag){t.flow=!!t.flow,t.baseTag=a=""+a===a?n&&n.tags[a]||oe[a]:a,l=d(l,a);for(s in t)l[s]=i(a[s],t[s])}else l=d(l,t);return void 0!==(o=l.template)&&(l.template=""+o===o?ne[o]||ne(o):o),l.init!==!1&&((r.prototype=l).constructor=l._ctr=r),n&&(l._parentTmpl=n),l}function x(e){return this.base.apply(this,e)}function T(e,n,i,r){function o(n){var o,s;if(""+n===n||n.nodeType>0&&(a=n)){if(!a)if(/^\.\/[^\\:*?"<>]*$/.test(n))(s=ne[e=e||n])?n=s:a=document.getElementById(n);else if(t.fn&&!ae.rTmpl.test(n))try{a=t(document).find(n)[0]}catch(e){}a&&(r?n=a.innerHTML:(o=a.getAttribute(Re),o?o!==je?(n=ne[o],delete ne[o]):t.fn&&(n=t.data(a)[je]):(e=e||(t.fn?je:n),n=T(e,a.innerHTML,i,r)),n.tmplName=e=e||o,e!==je&&(ne[e]=n),a.setAttribute(Re,e),t.fn&&t.data(a,je,n))),a=void 0}else n.fn||(n=void 0);return n}var a,s,l=n=n||"";return 0===r&&(r=void 0,l=o(l)),r=r||(n.markup?n:{}),r.tmplName=e,i&&(r._parentTmpl=i),!l&&n.markup&&(l=o(n.markup))&&l.fn&&(l=l.markup),void 0!==l?(l.fn||n.fn?l.fn&&(s=l):(n=D(l,r),N(l.replace(_e,"\\$&"),n)),s||(s=d(function(){return s.render.apply(s,arguments)},n),C(s)),e&&!i&&e!==je&&(Ne[e]=s),s):void 0}function E(e,n){return t.isFunction(e)?e.call(n):e}function F(e){var t,n=[],i=e.length;for(t=0;i>t;t++)n.push(e[t].unmap());return n}function k(e,n){function i(e){u.apply(this,e)}function r(){return new i(arguments)}function o(e,t){var n,i,r,o,a,s=p.length;for(n=0;s>n;n++)o=p[n],i=void 0,o+""!==o&&(i=o,o=i.getter),void 0===(a=e[o])&&i&&void 0!==(r=i.defaultVal)&&(a=E(r,e)),t(a,i&&c[i.type],o)}function a(t){t=t+""===t?JSON.parse(t):t;var n,i,r,a=t,d=[];if(te(t)){for(t=t||[],i=t.length,n=0;i>n;n++)d.push(this.map(t[n]));return d._is=e,d.unmap=l,d.merge=s,d}if(t){o(t,function(e,t){t&&(e=t.map(e)),d.push(e)}),a=this.apply(this,d);for(r in t)r===K||b[r]||(a[r]=t[r])}return a}function s(e){e=e+""===e?JSON.parse(e):e;var t,n,i,a,s,l,d,u,c,p,h=this;if(te(h)){for(u={},p=[],i=e.length,a=h.length,t=0;i>t;t++){for(c=e[t],d=!1,n=0;a>n&&!d;n++)u[n]||(l=h[n],f&&(u[n]=d=f+""===f?c[f]&&(b[f]?l[f]():l[f])===c[f]:f(l,c)));d?(l.merge(c),p.push(l)):p.push(r.map(c))}return void(w?w(h).refresh(p,!0):h.splice.apply(h,[0,h.length].concat(p)))}o(e,function(e,t,n){t?h[n]().merge(e):h[n](e)});for(s in e)s===K||b[s]||(h[s]=e[s])}function l(){var e,n,i,r,o,a,s=this;if(te(s))return F(s);for(e={},r=p.length,i=0;r>i;i++)n=p[i],o=void 0,n+""!==n&&(o=n,n=o.getter),a=s[n](),e[n]=o&&a&&c[o.type]?te(a)?F(a):a.unmap():a;for(n in s)"_is"===n||b[n]||n===K||"_"===n.charAt(0)&&b[n.slice(1)]||t.isFunction(s[n])||(e[n]=s[n]);return e}var d,u,c=this,p=n.getters,h=n.extend,f=n.id,m=t.extend({_is:e||"unnamed",unmap:l,merge:s},h),g="",v="",y=p?p.length:0,w=t.observable,b={};for(i.prototype=m,d=0;y>d;d++)!function(e){e=e.getter||e,b[e]=d+1;var t="_"+e;g+=(g?",":"")+e,v+="this."+t+" = "+e+";\n",m[e]=m[e]||function(n){return arguments.length?void(w?w(this).setProperty(e,n):this[t]=n):this[t]},w&&(m[e].set=m[e].set||function(e){this[t]=e})}(p[d]);return u=new Function(g,v.slice(0,-1)),u.prototype=m,m.constructor=u,r.map=a,r.getters=p,r.extend=h,r.id=f,r}function D(e,n){var i,r=le._wm||{},o=d({tmpls:[],links:{},bnds:[],_is:"template",render:L},n);return o.markup=e,n.htmlTag||(i=$e.exec(e),o.htmlTag=i?i[1].toLowerCase():""),i=r[o.htmlTag],i&&i!==r.div&&(o.markup=t.trim(o.markup)),o}function S(e,t){function n(r,o,a){var s,l,d,u;if(r&&typeof r===Ae&&!r.nodeType&&!r.markup&&!r.getTgt&&!("viewModel"===e&&r.getters||r.extend)){for(d in r)n(d,r[d],o);return o||Z}return void 0===o&&(o=r,r=void 0),r&&""+r!==r&&(a=o,o=r,r=void 0),u=a?"viewModel"===e?a:a[i]=a[i]||{}:n,l=t.compile,null===o?r&&delete u[r]:(o=l?l.call(u,r,o,a,0):o,r&&(u[r]=o)),l&&o&&(o._is=e),o&&(s=ae.onStore[e])&&s(r,o,l),o}var i=e+"s";Z[i]=n}function z(e){de[e]=function(t){return arguments.length?(se[e]=t,de):se[e]}}function $(e){function t(t,n){this.tgt=e.getTgt(t,n)}return ee(e)&&(e={getTgt:e}),e.baseMap&&(e=d(d({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function L(e,t,n,i,r,o){var a,s,l,d,u,c,p,h,f=i,m="";if(t===!0?(n=t,t=void 0):typeof t!==Ae&&(t=void 0),(l=this.tag)?(u=this,f=f||u.view,d=f.getTmpl(l.template||u.tmpl),arguments.length||(e=f)):d=this,d){if(!f&&e&&"view"===e._is&&(f=e),f&&e===f&&(e=f.data),c=!f,ge=ge||c,f||((t=t||{}).root=e),!ge||le.useViews||d.useViews||f&&f!==J)m=A(d,e,t,n,f,r,o,l);else{if(f?(p=f.data,h=f.index,f.index=Ue):(f=J,f.data=e,f.ctx=t),te(e)&&!n)for(a=0,s=e.length;s>a;a++)f.index=a,f.data=e[a],m+=d.fn(e[a],f,ae);else f.data=e,m+=d.fn(e,f,ae);f.data=p,f.index=h}c&&(ge=void 0)}return m}function A(e,t,n,i,r,o,a,s){function l(e){C=d({},n),C[w]=e}var u,c,p,h,f,m,g,v,y,w,C,_,x="";if(s&&(y=s.tagName,_=s.tagCtx,n=n?q(n,s.ctx):s.ctx,e===r.content?g=e!==r.ctx._wrp?r.ctx._wrp:void 0:e!==_.content?e===s.template?(g=_.tmpl,n._wrp=_.content):g=_.content||r.content:g=r.content,_.props.link===!1&&(n=n||{},n.link=!1),(w=_.props.itemVar)&&("~"!==w.charAt(0)&&U("Use itemVar='~myItem'"),w=w.slice(1))),r&&(a=a||r._.onRender,n=q(n,r.ctx)),o===!0&&(m=!0,o=0),a&&(n&&n.link===!1||s&&s._.noVws)&&(a=void 0),v=a,a===!0&&(v=void 0,a=r._.onRender),n=e.helpers?q(e.helpers,n):n,C=n,te(t)&&!i)for(p=m?r:void 0!==o&&r||new b(n,"array",r,t,e,o,a),r&&r._.useKey&&(p._.bnd=!s||s._.bnd&&s),w&&(p.it=w),w=p.it,u=0,c=t.length;c>u;u++)w&&l(t[u]),h=new b(C,"item",p,t[u],e,(o||0)+u,a,g),f=e.fn(t[u],h,ae),x+=p._.onRender?p._.onRender(f,h):f;else w&&l(t),p=m?r:new b(C,y||"data",r,t,e,o,a,g),s&&!s.flow&&(p.tag=s),x+=e.fn(t,p,ae);return v?v(x,p):x}function R(e,t,n){var i=void 0!==n?ee(n)?n.call(t.data,e,t):n||"":"{Error: "+e.message+"}";return se.onError&&void 0!==(n=se.onError.call(t.data,e,n&&i,t))&&(i=n),t&&!t.linkCtx?ie.html(i):i}function j(e){throw new ae.Err(e)}function U(e){j("Syntax error\n"+e)}function N(e,t,n,i,r){function o(t){t-=m,t&&v.push(e.substr(m,t).replace(be,"\\n"))}function a(t,n){t&&(t+="}}",U((n?"{{"+n+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function s(s,l,d,p,f,w,b,C,_,x,T,E){(b&&l||_&&!d||C&&":"===C.slice(-1)||x)&&U(s),w&&(f=":",p=Le),_=_||n&&!r;var F=(l||n)&&[[]],k="",D="",S="",z="",$="",L="",A="",R="",j=!_&&!f;d=d||(C=C||"#data",f),o(E),m=E+s.length,b?h&&v.push(["*","\n"+C.replace(/^:/,"ret+= ").replace(Ce,"$1")+";\n"]):d?("else"===d&&(Te.test(C)&&U('for "{{else if expr}}" use "{{else expr}}"'),F=y[7]&&[[]],y[8]=e.substring(y[8],E),y=g.pop(),v=y[2],j=!0),C&&P(C.replace(be," "),F,t).replace(xe,function(e,t,n,i,r,o,a,s){return i="'"+r+"':",a?(D+=o+",",z+="'"+s+"',"):n?(S+=i+"j._cp("+o+',"'+s+'",view),',L+=i+"'"+s+"',"):t?A+=o:("trigger"===r&&(R+=o),k+=i+o+",",$+=i+"'"+s+"',",c=c||ke.test(r)),""}).slice(0,-1),F&&F[0]&&F.pop(),u=[d,p||!!i||c||"",j&&[],I(z||(":"===d?"'#data',":""),$,L),I(D||(":"===d?"data,":""),k,S),A,R,F||0],v.push(u),j&&(g.push(y),y=u,y[8]=m)):T&&(a(T!==y[0]&&"else"!==y[0]&&T,y[0]),y[8]=e.substring(y[8],E),y=g.pop()),a(!y&&T),v=y[2]}var l,d,u,c,p,h=se.allowCode||t&&t.allowCode||de.allowCode===!0,f=[],m=0,g=[],v=f,y=[,,f];if(h&&t._is&&(t.allowCode=h),n&&(void 0!==i&&(e=e.slice(0,-i.length-2)+he),e=ue+e+he),a(g[0]&&g[0][2].pop()[0]),e.replace(G,s),o(e.length),(m=f[f.length-1])&&a(""+m!==m&&+m[8]===m[8]&&m[0]),n){for(d=O(f,e,n),p=[],l=f.length;l--;)p.unshift(f[l][7]);M(d,p)}else d=O(f,t);return d}function M(e,t){var n,i,r=0,o=t.length;for(e.deps=[];o>r;r++){i=t[r];for(n in i)"_jsvto"!==n&&i[n].length&&(e.deps=e.deps.concat(i[n]))}e.paths=i}function I(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function H(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n\tprops:{"+e[1]+"}":"")+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function P(e,t,n){function i(i,v,y,w,b,C,_,x,T,E,F,k,D,S,z,$,L,A,R,j){function M(e,n,i,a,s,l,c,p){var h="."===i;if(i&&(b=b.slice(n.length),/^\.?constructor$/.test(p||b)&&U(e),h||(e=(a?'view.hlp("'+a+'")':s?"view":"data")+(p?(l?"."+l:a?"":s?"":"."+i)+(c||""):(p=a?"":s?l||"":i,"")),e+=p?"."+p:"",e=n+("view.data"===e.slice(0,9)?e.slice(5):e)),d)){if(P="linkTo"===r?o=t._jsvto=t._jsvto||[]:u.bd,O=h&&P[P.length-1]){if(O._jsv){for(;O.sb;)O=O.sb;O.bnd&&(b="^"+b.slice(1)),O.sb=b,O.bnd=O.bnd||"^"===b.charAt(0)}}else P.push(b);g[f]=R+(h?1:0)}return e}w&&!x&&(b=w+b),C=C||"",y=y||v||k,b=b||T,E=E||L||"";var I,H,P,O,q,B=")";if("["===E&&(E="[j._sq(",B=")]"),!_||l||s){if(d&&$&&!l&&!s&&(!r||a||o)&&(I=g[f-1],j.length-1>R-(I||0))){if(I=j.slice(I,R+i.length),H!==!0)if(P=o||c[f-1].bd,O=P[P.length-1],O&&O.prm){for(;O.sb&&O.sb.prm;)O=O.sb;q=O.sb={path:O.sb,bnd:O.bnd}}else P.push(q={path:P.pop()});$=ce+":"+I+" onerror=''"+pe,H=h[$],H||(h[$]=!0,h[$]=H=N($,n,!0)),H!==!0&&q&&(q._jsv=H,q.prm=u.bd,q.bnd=q.bnd||q.path&&q.path.indexOf("^")>=0)}return l?(l=!D,l?i:k+'"'):s?(s=!S,s?i:k+'"'):(y?(g[f]=R++,u=c[++f]={bd:[]},y):"")+(A?f?"":(p=j.slice(p,R),(r?(r=a=o=!1,"\b"):"\b,")+p+(p=R+i.length,d&&t.push(u.bd=[]),"\b")):x?(f&&U(e),d&&t.pop(),r=b,a=w,p=R+i.length,w&&(d=u.bd=t[r]=[]),b+":"):b?b.split("^").join(".").replace(ye,M)+(E?(u=c[++f]={bd:[]},m[f]=B,E):C):C?C:z?(z=m[f]||z,m[f]=!1,u=c[--f],z+(E?(u=c[++f],m[f]=B,E):"")):F?(m[f]||U(e),","):v?"":(l=D,s=S,'"'))}U(e)}var r,o,a,s,l,d=t&&t[0],u={bd:d},c={0:u},p=0,h=(n?n.links:d&&(d.links=d.links||{}))||J.tmpl.links,f=0,m={},g={},v=(e+(n?" ":"")).replace(we,i);return!f&&v||U(e)}function O(e,t,n){var i,r,o,a,s,l,d,u,c,p,h,f,m,g,v,y,w,b,C,_,x,T,E,F,k,S,z,$,L,A,R=0,j=le.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,N="",I={},P=e.length;for(""+t===t?(b=n?'data-link="'+t.replace(be," ").slice(1,-1)+'"':t,t=0):(b=t.tmplName||"unnamed",t.allowCode&&(I.allowCode=!0),t.debug&&(I.debug=!0),h=t.bnds,w=t.tmpls),i=0;P>i;i++)if(r=e[i],""+r===r)N+='\n+"'+r+'"';else if(o=r[0],"*"===o)N+=";\n"+r[1]+"\nret=ret";else{if(a=r[1],x=!n&&r[2],s=H(r[3],"params")+"},"+H(m=r[4]),$=r[5],A=r[6],T=r[8]&&r[8].replace(Ce,"$1"),(k="else"===o)?f&&f.push(r[7]):(R=0,h&&(f=r[7])&&(f=[f],R=h.push(1))),j=j||m[1]||m[2]||f||/view.(?!index)/.test(m[0]),(S=":"===o)?a&&(o=a===Le?">":a+o):(x&&(C=D(T,I),C.tmplName=b+"/"+o,C.useViews=C.useViews||j,O(x,C),j=C.useViews,w.push(C)),k||(_=o,j=j||o&&(!oe[o]||!oe[o].flow),F=N,N=""),E=e[i+1],E=E&&"else"===E[0]),L=$?";\ntry{\nret+=":"\n+",g="",v="",S&&(f||A||a&&a!==Le)){if(z=new Function("data,view,j,u"," // "+b+" "+R+" "+o+"\nreturn {"+s+"};"),z._er=$,z._tag=o,n)return z;M(z,f),y='c("'+a+'",view,',p=!0,g=y+R+",",v=")"}if(N+=S?(n?($?"try{\n":"")+"return ":L)+(p?(p=void 0,j=c=!0,y+(f?(h[R-1]=z,R):"{"+s+"}")+")"):">"===o?(d=!0,"h("+m[0]+")"):(u=!0,"((v="+m[0]+")!=null?v:"+(n?"null)":'"")'))):(l=!0,"\n{view:view,tmpl:"+(x?w.length:"0")+","+s+"},"),_&&!E){if(N="["+N.slice(0,-1)+"]",y='t("'+_+'",view,this,',n||f){if(N=new Function("data,view,j,u"," // "+b+" "+R+" "+_+"\nreturn "+N+";"),N._er=$,N._tag=_,f&&M(h[R-1]=N,f),n)return N;g=y+R+",undefined,",v=")"}N=F+L+y+(R||N)+")",f=0,_=0}$&&(j=!0,N+=";\n}catch(e){ret"+(n?"urn ":"+=")+g+"j._err(e,view,"+$+")"+v+";}"+(n?"":"ret=ret"))}N="// "+b+"\nvar v"+(l?",t=j._tag":"")+(c?",c=j._cnvt":"")+(d?",h=j._html":"")+(n?";\n":',ret=""\n')+(I.debug?"debugger;":"")+N+(n?"\n":";\nreturn ret;"),se.debugMode!==!1&&(N="try {\n"+N+"\n}catch(e){\nreturn j._err(e, view);\n}");try{N=new Function("data,view,j,u",N)}catch(e){U("Compiled template code:\n\n"+N+'\n: "'+e.message+'"')}return t&&(t.fn=N,t.useViews=!!j),N}function q(e,t){return e&&e!==t?t?d(d({},t),e):e:t&&d({},t)}function B(e){return ze[e]||(ze[e]="&#"+e.charCodeAt(0)+";")}function W(e){var t,n,i=[];if(typeof e===Ae)for(t in e)n=e[t],t===K||ee(n)||i.push({key:t,prop:n});return i}function Q(e,n,i){var r=this.jquery&&(this[0]||j('Unknown template: "'+this.selector+'"')),o=r.getAttribute(Re);return L.call(o?t.data(r)[je]:ne(r),e,n,i)}function Y(e){return void 0!=e?Fe.test(e)&&(""+e).replace(De,B)||e:""}var X=t===!1;t=t&&t.fn?t:e.jQuery;var V,G,J,Z,K,ee,te,ne,ie,re,oe,ae,se,le,de,ue,ce,pe,he,fe,me,ge,ve="v0.9.80",ye=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,we=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,be=/[ \t]*(\r\n|\n|\r)/g,Ce=/\\(['"])/g,_e=/['"\\]/g,xe=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,Te=/^if\s/,$e=/<(\w+)[>\s]/,Ee=/[\x00`><"'&=]/g,Fe=/[\x00`><\"'&=]/,ke=/^on[A-Z]|^convert(Back)?$/,De=Ee,Se=0,ze={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},Le="html",Ae="object",Re="data-jsv-tmpl",je="jsvTmpl",Ue="For #index in nested block use #getIndex().",Ne={},Me=e.jsrender,Ie=Me&&t&&!t.render,He={template:{compile:T},tag:{compile:_},viewModel:{compile:k},helper:{},converter:{}};if(Z={jsviews:ve,sub:{View:b,Err:l,tmplFn:N,parse:P,extend:d,extendCtx:q,syntaxErr:U,onStore:{},addSetting:z,settings:{allowCode:!1},advSet:a,_ths:r,_tg:function(){},_cnvt:g,_tag:w,_er:j,_err:R,_html:Y,_cp:o,_sq:function(e){return"constructor"===e&&U(""),e}},settings:{delimiters:u,advanced:function(e){return e?(d(le,e),ae.advSet(),de):le}},getCtx:o,map:$},(l.prototype=new Error).constructor=l,p.depends=function(){return[this.get("item"),"index"]},h.depends="index",b.prototype={get:c,getIndex:h,getRsc:y,getTmpl:m,hlp:f,_is:"view"},ae=Z.sub,de=Z.settings,!(Me||t&&t.render)){for(V in He)S(V,He[V]);ie=Z.converters,re=Z.helpers,oe=Z.tags,ae._tg.prototype={baseApply:x,cvtArgs:v},J=ae.topView=new b,t?(t.fn.render=Q,K=t.expando,t.observable&&(d(ae,t.views.sub),Z.map=t.views.map)):(t={},X&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},ae._jq=function(e){e!==t&&(d(e,t),t=e,t.fn.render=Q,delete t.jsrender,K=t.expando)},t.jsrender=ve),se=ae.settings,se.allowCode=!1,ee=t.isFunction,t.render=Ne,t.views=Z,t.templates=ne=Z.templates;for(me in se)z(me);(de.debugMode=function(e){return void 0===e?se.debugMode:(se.debugMode=e,se.onError=e+""===e?new Function("","return '"+e+"';"):ee(e)?e:void 0,de)})(!1),le=se.advanced={useViews:!1,_jsv:!1},oe({if:{render:function(e){var t=this,n=t.tagCtx,i=t.rendering.done||!e&&(arguments.length||!n.index)?"":(t.rendering.done=!0,t.selected=n.index,n.render(n.view,!0));return i},flow:!0},for:{render:function(e){var t,n=!arguments.length,i=this,r=i.tagCtx,o="",a=0;return i.rendering.done||(t=n?r.view.data:e,void 0!==t&&(o+=r.render(t,n),a+=te(t)?t.length:1),(i.rendering.done=a)&&(i.selected=r.index)),o},flow:!0},props:{baseTag:"for",dataMap:$(W),flow:!0},include:{flow:!0},"*":{render:o,flow:!0},":*":{render:o,flow:!0},dbg:re.dbg=ie.dbg=s}),ie({html:Y,attr:Y,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}})}return se=ae.settings,te=t.isArray,de.delimiters("{{","}}","^"),Ie&&Me.views.sub._jq(t),t||Me},window);var jio_data_img={inview:function(e){var t=$(window);return!(t.scrollTop()+t.height()<=e.offset().top)&&!(t.scrollTop()>=e.offset().top+e.height())},replace:function(e){var t=e.attr("data-src"),n=e.attr("data-bg"),i=e.attr("data-img-id"),r=e.attr("data-id-size"),o=e.attr("data-srcset"),a=e.attr("data-sizes"),s=new Image;e.removeAttr("data-src data-bg data-srcset data-sizes data-img-id data-id-size"),"undefined"!=typeof t&&(s.src=t,s.onload=function(){e.removeClass("loading").attr("src",t)}),"undefined"!=typeof i&&"undefined"!=typeof jsonURL&&("undefined"==typeof r&&(r="full"),jsGetJSON("media/"+i,function(t){if(404===t.status&&(e.parent(".image-container").remove(),e.remove()),404!==t.status){var n;n="undefined"!=typeof t.media_details.sizes[r]?t.media_details.sizes[r].source_url:t.source_url,s.src=n,s.onload=function(){e.removeClass("loading").attr("src",n)}}})),"undefined"!=typeof o&&(s.srcset=o,s.sizes=a,s.onload=function(){e.removeClass("loading").attr("srcset",o).attr("sizes",a)}),"undefined"!=typeof n&&(s.src=n,s.onload=function(){e.removeClass("loading").css({backgroundImage:"url("+n+")"})})},scan:function(){$("[data-src], [data-bg], [data-srcset], [data-sizes], [data-img-id]").each(function(e){var t=$(this);jio_data_img.inview(t)&&jio_data_img.replace(t)})},init:function(e){$.isArray(e)&&e.forEach(function(e){$(window).on(e,function(){jio_data_img.scan()})})}};jio_data_img.init(["load","scroll","resize"]);var DRIVE_UPLOAD_URL="https://www.googleapis.com/upload/drive/v2/files/",RetryHandler=function(){this.interval=1e3,this.maxInterval=6e4};RetryHandler.prototype.retry=function(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()},RetryHandler.prototype.reset=function(){this.interval=1e3},RetryHandler.prototype.nextInterval_=function(){var e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)},RetryHandler.prototype.getRandomInt_=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var MediaUploader=function(e){var t=function(){};if(this.file=e.file,this.contentType=e.contentType||this.file.type||"application/octet-stream",this.metadata=e.metadata||{title:this.file.name,mimeType:this.contentType},this.token=e.token,this.onComplete=e.onComplete||t,this.onProgress=e.onProgress||t,this.onError=e.onError||t,this.offset=e.offset||0,this.chunkSize=e.chunkSize||0,this.retryHandler=new RetryHandler,this.url=e.url,!this.url){var n=e.params||{};n.uploadType="resumable",this.url=this.buildUrl_(e.fileId,n,e.baseUrl)}this.httpMethod=e.fileId?"PUT":"POST"};MediaUploader.prototype.upload=function(){var e=this,t=new XMLHttpRequest;t.open(this.httpMethod,this.url,!0),t.setRequestHeader("Authorization","Bearer "+this.token),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Upload-Content-Length",this.file.size),t.setRequestHeader("X-Upload-Content-Type",this.contentType),t.onload=function(e){if(e.target.status<400){var t=e.target.getResponseHeader("Location");this.url=t,this.sendFile_()}else this.onUploadError_(e)}.bind(this),t.onerror=this.onUploadError_.bind(this),t.send(JSON.stringify(this.metadata))},MediaUploader.prototype.sendFile_=function(){var e=this.file,t=this.file.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.file.size)),e=e.slice(this.offset,t));var n=new XMLHttpRequest;n.open("PUT",this.url,!0),n.setRequestHeader("Content-Type",this.contentType),n.setRequestHeader("Content-Range","bytes "+this.offset+"-"+(t-1)+"/"+this.file.size),n.setRequestHeader("X-Upload-Content-Type",this.file.type),n.upload&&n.upload.addEventListener("progress",this.onProgress),n.onload=this.onContentUploadSuccess_.bind(this),n.onerror=this.onContentUploadError_.bind(this),n.send(e)},MediaUploader.prototype.resume_=function(){var e=new XMLHttpRequest;e.open("PUT",this.url,!0),e.setRequestHeader("Content-Range","bytes */"+this.file.size),e.setRequestHeader("X-Upload-Content-Type",this.file.type),e.upload&&e.upload.addEventListener("progress",this.onProgress),e.onload=this.onContentUploadSuccess_.bind(this),e.onerror=this.onContentUploadError_.bind(this),e.send()},MediaUploader.prototype.extractRange_=function(e){var t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)},MediaUploader.prototype.onContentUploadSuccess_=function(e){200==e.target.status||201==e.target.status?this.onComplete(e.target.response):308==e.target.status&&(this.extractRange_(e.target),this.retryHandler.reset(),this.sendFile_())},MediaUploader.prototype.onContentUploadError_=function(e){e.target.status&&e.target.status<500?this.onError(e.target.response):this.retryHandler.retry(this.resume_.bind(this))},MediaUploader.prototype.onUploadError_=function(e){this.onError(e.target.response)},MediaUploader.prototype.buildQuery_=function(e){return e=e||{},Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},MediaUploader.prototype.buildUrl_=function(e,t,n){var i=n||DRIVE_UPLOAD_URL;e&&(i+=e);var r=this.buildQuery_(t);return r&&(i+="?"+r),i},/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
function e(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function e(){"use strict";function t(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=b({},t),e[B]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in n)!(i in t)&&(t[i]=n[i]);ie(t);for(var r in this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&V,a(e,"mousedown",this._onTapStart),a(e,"touchstart",this._onTapStart),this.nativeDraggable&&(a(e,"dragover",this),a(e,"dragenter",this)),te.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function n(e){E&&E.state!==e&&(d(E,"display",e?"none":""),!e&&E.state&&F.insertBefore(E,_),E.state=e)}function i(e,t,n){if(e){n=n||Q;do if(">*"===t&&e.parentNode===n||y(e,t))return e;while(e=r(e))}return null}function r(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function o(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function a(e,t,n){e.addEventListener(t,n,!1)}function s(e,t,n){e.removeEventListener(t,n,!1)}function l(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(q," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(q," ")}}function d(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return Q.defaultView&&Q.defaultView.getComputedStyle?n=Q.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function u(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function c(e,t,n,i,r,o,a){e=e||t[B];var s=Q.createEvent("Event"),l=e.options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=r||t,s.item=i||t,s.clone=E,s.oldIndex=o,s.newIndex=a,t.dispatchEvent(s),l[d]&&l[d].call(e,s)}function p(e,t,n,i,r,o,a){var s,l=e[B],d=l.options.onMove,u;return s=Q.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=n,s.draggedRect=i,s.related=r||t,s.relatedRect=o||t.getBoundingClientRect(),e.dispatchEvent(s),d&&(u=d.call(l,s,a)),u}function h(e){e.draggable=!1}function f(){J=!1}function m(e,t){var n=e.lastElementChild,i=n.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&n}function g(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function v(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!y(e,t)||n++;return n}function y(e,t){if(e){t=t.split(".");var n=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(i)||[]).length!=t.length)}return!1}function w(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function b(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function C(e){return $?$(e).clone(!0)[0]:X&&X.dom?X.dom(e).cloneNode(!0):e.cloneNode(!0)}if("undefined"==typeof window||!window.document)return function e(){throw new Error("Sortable.js requires a window with a document")};var _,x,T,E,F,k,D,S,z,L,A,R,j,U,N,M,I={},H,P,O,q=/\s+/g,B="Sortable"+(new Date).getTime(),W=window,Q=W.document,Y=W.parseInt,$=W.jQuery||W.Zepto,X=W.Polymer,V=!!("draggable"in Q.createElement("div")),G=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=Q.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),J=!1,Z=Math.abs,K=Math.min,ee=[].slice,te=[],ne=w(function(e,t,n){if(n&&t.scroll){var i,r,o=t.scrollSensitivity,a=t.scrollSpeed,s=e.clientX,l=e.clientY,d=window.innerWidth,u=window.innerHeight,c,p,h,f;if(S!==n&&(D=t.scroll,S=n,z=t.scrollFn,D===!0)){D=n;do if(D.offsetWidth<D.scrollWidth||D.offsetHeight<D.scrollHeight)break;while(D=D.parentNode)}D&&(i=D,r=D.getBoundingClientRect(),c=(Z(r.right-s)<=o)-(Z(r.left-s)<=o),p=(Z(r.bottom-l)<=o)-(Z(r.top-l)<=o)),c||p||(c=(d-s<=o)-(s<=o),p=(u-l<=o)-(l<=o),(c||p)&&(i=W)),I.vx===c&&I.vy===p&&I.el===i||(I.el=i,I.vx=c,I.vy=p,clearInterval(I.pid),i&&(I.pid=setInterval(function(){return f=p?p*a:0,h=c?c*a:0,"function"==typeof z?z.call(_this,h,f,e):void(i===W?W.scrollTo(W.pageXOffset+h,W.pageYOffset+f):(i.scrollTop+=f,i.scrollLeft+=h))},24)))}},30),ie=function(e){function t(e,t){return void 0!==e&&e!==!0||(e=n.name),"function"==typeof e?e:function(n,i){var r=i.options.group.name;return t?e:e&&(e.join?e.indexOf(r)>-1:r==e)}}var n={},i=e.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),e.group=n};return t.prototype={constructor:t,_onTapStart:function(e){var t=this,n=this.el,r=this.options,o=e.type,a=e.touches&&e.touches[0],s=(a||e).target,l=e.target.shadowRoot&&e.path[0]||s,d=r.filter,u;if(!_&&!("mousedown"===o&&0!==e.button||r.disabled)&&(!r.handle||i(l,r.handle,n))&&(s=i(s,r.draggable,n))){if(u=v(s,r.draggable),"function"==typeof d){if(d.call(this,e,s,this))return c(t,l,"filter",s,n,u),void e.preventDefault()}else if(d&&(d=d.split(",").some(function(e){if(e=i(l,e.trim(),n))return c(t,e,"filter",s,n,u),!0})))return void e.preventDefault();this._prepareDragStart(e,a,s,u)}},_prepareDragStart:function(e,t,n,i){var r=this,o=r.el,s=r.options,d=o.ownerDocument,p;n&&!_&&n.parentNode===o&&(H=e,F=o,_=n,x=_.parentNode,k=_.nextSibling,N=s.group,j=i,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,_.style["will-change"]="transform",p=function(){r._disableDelayedDrag(),_.draggable=r.nativeDraggable,l(_,s.chosenClass,!0),r._triggerDragStart(t),c(r,F,"choose",_,F,j)},s.ignore.split(",").forEach(function(e){u(_,e.trim(),h)}),a(d,"mouseup",r._onDrop),a(d,"touchend",r._onDrop),a(d,"touchcancel",r._onDrop),s.delay?(a(d,"mouseup",r._disableDelayedDrag),a(d,"touchend",r._disableDelayedDrag),a(d,"touchcancel",r._disableDelayedDrag),a(d,"mousemove",r._disableDelayedDrag),a(d,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(p,s.delay)):p())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),s(e,"mouseup",this._disableDelayedDrag),s(e,"touchend",this._disableDelayedDrag),s(e,"touchcancel",this._disableDelayedDrag),s(e,"mousemove",this._disableDelayedDrag),s(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(H={target:_,clientX:e.clientX,clientY:e.clientY},this._onDragStart(H,"touch")):this.nativeDraggable?(a(_,"dragend",this),a(F,"dragstart",this._onDragStart)):this._onDragStart(H,!0);try{Q.selection?setTimeout(function(){Q.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(F&&_){var e=this.options;l(_,e.ghostClass,!0),l(_,e.dragClass,!1),t.active=this,c(this,F,"start",_,F,j)}},_emulateDragOver:function(){if(P){if(this._lastX===P.clientX&&this._lastY===P.clientY)return;this._lastX=P.clientX,this._lastY=P.clientY,G||d(T,"display","none");var e=Q.elementFromPoint(P.clientX,P.clientY),t=e,n=te.length;if(t)do{if(t[B]){for(;n--;)te[n]({clientX:P.clientX,clientY:P.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);G||d(T,"display","")}},_onTouchMove:function(e){if(H){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,a=o.clientX-H.clientX+r.x,s=o.clientY-H.clientY+r.y,l=e.touches?"translate3d("+a+"px,"+s+"px,0)":"translate("+a+"px,"+s+"px)";if(!t.active){if(i&&K(Z(o.clientX-this._lastX),Z(o.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),O=!0,P=o,d(T,"webkitTransform",l),d(T,"mozTransform",l),d(T,"msTransform",l),d(T,"transform",l),e.preventDefault()}},_appendGhost:function(){if(!T){var e=_.getBoundingClientRect(),t=d(_),n=this.options,i;T=_.cloneNode(!0),l(T,n.ghostClass,!1),l(T,n.fallbackClass,!0),l(T,n.dragClass,!0),d(T,"top",e.top-Y(t.marginTop,10)),d(T,"left",e.left-Y(t.marginLeft,10)),d(T,"width",e.width),d(T,"height",e.height),d(T,"opacity","0.8"),d(T,"position","fixed"),d(T,"zIndex","100000"),d(T,"pointerEvents","none"),n.fallbackOnBody&&Q.body.appendChild(T)||F.appendChild(T),i=T.getBoundingClientRect(),d(T,"width",2*e.width-i.width),d(T,"height",2*e.height-i.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,i=this.options;this._offUpEvents(),"clone"==N.checkPull(this,this,_,e)&&(E=C(_),d(E,"display","none"),F.insertBefore(E,_),c(this,F,"clone",_)),l(_,i.dragClass,!0),t?("touch"===t?(a(Q,"touchmove",this._onTouchMove),a(Q,"touchend",this._onDrop),a(Q,"touchcancel",this._onDrop)):(a(Q,"mousemove",this._onTouchMove),a(Q,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,_)),a(Q,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var r=this.el,o,a,s,l,u=this.options,c=u.group,h=t.active,g=N===c,v=u.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!u.dragoverBubble&&e.stopPropagation()),O=!0,N&&!u.disabled&&(g?v||(l=!F.contains(_)):M===this||N.checkPull(this,h,_,e)&&c.checkPut(this,h,_,e))&&(void 0===e.rootEl||e.rootEl===this.el)){if(ne(e,u,this.el),J)return;if(o=i(e.target,u.draggable,r),a=_.getBoundingClientRect(),M=this,l)return n(!0),x=F,void(E||k?F.insertBefore(_,E||k):v||F.appendChild(_));if(0===r.children.length||r.children[0]===T||r===e.target&&(o=m(r,e))){if(o){if(o.animated)return;s=o.getBoundingClientRect()}n(g),p(F,r,_,a,o,s,e)!==!1&&(_.contains(r)||(r.appendChild(_),x=r),this._animate(a,_),o&&this._animate(s,o))}else if(o&&!o.animated&&o!==_&&void 0!==o.parentNode[B]){L!==o&&(L=o,A=d(o),R=d(o.parentNode)),s=o.getBoundingClientRect();var y=s.right-s.left,w=s.bottom-s.top,b=/left|right|inline/.test(A.cssFloat+A.display)||"flex"==R.display&&0===R["flex-direction"].indexOf("row"),C=o.offsetWidth>_.offsetWidth,D=o.offsetHeight>_.offsetHeight,S=(b?(e.clientX-s.left)/y:(e.clientY-s.top)/w)>.5,z=o.nextElementSibling,j=p(F,r,_,a,o,s,e),U;if(j!==!1){if(J=!0,setTimeout(f,30),n(g),1===j||j===-1)U=1===j;else if(b){var I=_.offsetTop,H=o.offsetTop;U=I===H?o.previousElementSibling===_&&!C||S&&C:o.previousElementSibling===_||_.previousElementSibling===o?(e.clientY-s.top)/w>.5:H>I}else U=z!==_&&!D||S&&D;_.contains(r)||(U&&!z?r.appendChild(_):o.parentNode.insertBefore(_,U?z:o)),x=_.parentNode,this._animate(a,_),this._animate(s,o)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();d(t,"transition","none"),d(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,d(t,"transition","all "+n+"ms"),d(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){d(t,"transition",""),d(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;s(Q,"touchmove",this._onTouchMove),s(e,"mouseup",this._onDrop),s(e,"touchend",this._onDrop),s(e,"touchcancel",this._onDrop)},_onDrop:function(e){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(I.pid),clearTimeout(this._dragStartTimer),s(Q,"mousemove",this._onTouchMove),this.nativeDraggable&&(s(Q,"drop",this),s(n,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(O&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),T&&T.parentNode.removeChild(T),_&&(this.nativeDraggable&&s(_,"dragend",this),h(_),_.style["will-change"]="",l(_,this.options.ghostClass,!1),l(_,this.options.chosenClass,!1),F!==x?(U=v(_,i.draggable),U>=0&&(c(null,x,"add",_,F,j,U),c(this,F,"remove",_,F,j,U),c(null,x,"sort",_,F,j,U),c(this,F,"sort",_,F,j,U))):(E&&E.parentNode.removeChild(E),_.nextSibling!==k&&(U=v(_,i.draggable),U>=0&&(c(this,F,"update",_,F,j,U),c(this,F,"sort",_,F,j,U)))),t.active&&(null!=U&&U!==-1||(U=j),c(this,F,"end",_,F,j,U),this.save()))),this._nulling()},_nulling:function(){F=_=x=T=k=E=D=S=H=P=O=U=L=A=M=N=t.active=null},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?_&&(this._onDragOver(e),o(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e=[],t,n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)t=n[r],i(t,a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||g(t));return e},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var o=n.children[r];i(o,this.options.draggable,n)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return i(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&ie(n)))},destroy:function(){var e=this.el;e[B]=null,s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),this.nativeDraggable&&(s(e,"dragover",this),s(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),te.splice(te.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},t.utils={on:a,off:s,css:d,find:u,is:function(e,t){return!!i(e,t,e)},extend:b,throttle:w,closest:i,toggleClass:l,clone:C,index:v},t.create=function(e,n){return new t(e,n)},t.version="1.4.2",t}),function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.autosize=t()}(this,function(){function e(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),e.style.wordWrap="break-word";var o=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=o,i="none"!==t.maxHeight&&parseFloat(t.maxHeight),r="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),n()}function n(){var t=e.style.height,n=document.documentElement.scrollTop,o=document.body.scrollTop;e.style.height="auto";var a=e.scrollHeight+r;if(i!==!1&&i<a?(a=i,"scroll"!==e.style.overflowY&&(e.style.overflowY="scroll")):"hidden"!==e.style.overflowY&&(e.style.overflowY="hidden"),e.style.height=a+"px",document.documentElement.scrollTop=n,document.body.scrollTop=o,t!==e.style.height){var s=document.createEvent("Event");s.initEvent("autosize.resized",!0,!1),e.dispatchEvent(s)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var i,r;"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",n),window.addEventListener("resize",n),e.addEventListener("input",n),e.addEventListener("autosize.update",n),e.addEventListener("autosize.destroy",function(t){window.removeEventListener("resize",n),e.removeEventListener("input",n),e.removeEventListener("keyup",n),e.removeEventListener("autosize.destroy"),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),e.removeAttribute("data-autosize-on")}.bind(e,{height:e.style.height,overflow:e.style.overflow,overflowY:e.style.overflowY,wordWrap:e.style.wordWrap,resize:e.style.resize})),e.setAttribute("data-autosize-on",!0),e.style.overflow="hidden",e.style.overflowY="hidden",t()}}return"function"!=typeof window.getComputedStyle?function(e){return e}:function(t){return t&&t.length?Array.prototype.forEach.call(t,e):t&&t.nodeName&&e(t),t}}),!function(e,t){"use strict";function n(){return t}"function"==typeof define&&define.amd?define("tinysort",n):e.tinysort=t}(this,function(){"use strict";function e(e,i){function s(){0===arguments.length?v({}):t(arguments,function(e){v(k(e)?{selector:e}:e)}),h=$.length}function v(e){var t=!!e.selector,i=t&&":"===e.selector[0],r=n(e||{},g);$.push(n({hasSelector:t,hasAttr:!(r.attr===a||""===r.attr),hasData:r.data!==a,hasFilter:i,sortReturnNumber:"asc"===r.order?1:-1},r))}function y(){t(e,function(e,t){S?S!==e.parentNode&&(j=!1):S=e.parentNode;var n=$[0],i=n.hasFilter,r=n.selector,o=!r||i&&e.matchesSelector(r)||r&&e.querySelector(r),a=o?A:R,s={elm:e,pos:t,posn:a.length};L.push(s),a.push(s)}),D=A.slice(0)}function w(e,t,n){for(var i=n(e.toString()),r=n(t.toString()),o=0;i[o]&&r[o];o++)if(i[o]!==r[o]){var a=Number(i[o]),s=Number(r[o]);return a==i[o]&&s==r[o]?a-s:i[o]>r[o]?1:-1}return i.length-r.length}function b(e){for(var t,n,i=[],r=0,o=-1,a=0;t=(n=e.charAt(r++)).charCodeAt(0);){var s=46==t||t>=48&&57>=t;s!==a&&(i[++o]="",a=s),i[o]+=n}return i}function C(e,n){var i=0;for(0!==f&&(f=0);0===i&&h>f;){var a=$[f],s=a.ignoreDashes?c:u;if(t(p,function(e){var t=e.prepare;t&&t(a)}),a.sortFunction)i=a.sortFunction(e,n);else if("rand"==a.order)i=Math.random()<.5?1:-1;else{var l=o,m=F(e,a),g=F(n,a),v=""===m||m===r,y=""===g||g===r;if(m===g)i=0;else if(a.emptyEnd&&(v||y))i=v&&y?0:v?1:-1;else{if(!a.forceStrings){var C=k(m)?m&&m.match(s):o,_=k(g)?g&&g.match(s):o;if(C&&_){var x=m.substr(0,m.length-C[0].length),T=g.substr(0,g.length-_[0].length);x==T&&(l=!o,m=d(C[0]),g=d(_[0]))}}i=m===r||g===r?0:a.natural&&(isNaN(m)||isNaN(g))?w(m,g,b):g>m?-1:m>g?1:0}}t(p,function(e){var t=e.sort;t&&(i=t(a,l,m,g,i))}),i*=a.sortReturnNumber,0===i&&f++}return 0===i&&(i=e.pos>n.pos?1:-1),i}function _(){var e=A.length===L.length;if(j&&e)M?A.forEach(function(e,t){e.elm.style.order=t}):S?S.appendChild(x()):console.warn("parentNode has been removed");else{var t=$[0],n=t.place,i="org"===n,r="start"===n,o="end"===n,a="first"===n,s="last"===n;if(i)A.forEach(T),A.forEach(function(e,t){E(D[t],e.elm)});else if(r||o){var l=D[r?0:D.length-1],d=l&&l.elm.parentNode,u=d&&(r&&d.firstChild||d.lastChild);u&&(u!==l.elm&&(l={elm:u}),T(l),o&&d.appendChild(l.ghost),E(l,x()))}else if(a||s){var c=D[a?0:D.length-1];E(T(c),x())}}}function x(){return A.forEach(function(e){z.appendChild(e.elm)}),z}function T(e){var t=e.elm,n=l.createElement("div");return e.ghost=n,t.parentNode.insertBefore(n,t),e}function E(e,t){var n=e.ghost,i=n.parentNode;i.insertBefore(t,n),i.removeChild(n),delete e.ghost}function F(e,t){var n,i=e.elm;return t.selector&&(t.hasFilter?i.matchesSelector(t.selector)||(i=a):i=i.querySelector(t.selector)),t.hasAttr?n=i.getAttribute(t.attr):t.useVal?n=i.value||i.getAttribute("value"):t.hasData?n=i.getAttribute("data-"+t.data):i&&(n=i.textContent),k(n)&&(t.cases||(n=n.toLowerCase()),n=n.replace(/\s+/g," ")),null===n&&(n=m),n}function k(e){return"string"==typeof e}k(e)&&(e=l.querySelectorAll(e)),0===e.length&&console.warn("No elements to sort");var D,S,z=l.createDocumentFragment(),L=[],A=[],R=[],$=[],j=!0,U=e.length&&e[0].parentNode,N=U.rootNode!==document,M=e.length&&(i===r||i.useFlex!==!1)&&!N&&-1!==getComputedStyle(U,null).display.indexOf("flex");return s.apply(a,Array.prototype.slice.call(arguments,1)),y(),A.sort(C),_(),A.map(function(e){return e.elm})}function t(e,t){for(var n,i=e.length,r=i;r--;)n=i-r-1,t(e[n],n)}function n(e,t,n){for(var i in t)(n||e[i]===r)&&(e[i]=t[i]);return e}function i(e,t,n){p.push({prepare:e,sort:t,sortBy:n})}var r,o=!1,a=null,s=window,l=s.document,d=parseFloat,u=/(-?\d+\.?\d*)\s*$/g,c=/(\d+\.?\d*)\s*$/g,p=[],h=0,f=0,m=String.fromCharCode(4095),g={selector:a,order:"asc",attr:a,data:a,useVal:o,place:"org",returns:o,cases:o,natural:o,forceStrings:o,ignoreDashes:o,sortFunction:a,useFlex:o,emptyEnd:o};return s.Element&&function(e){e.matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,n=(t.parentNode||t.document).querySelectorAll(e),i=-1;n[++i]&&n[i]!=t;);return!!n[i]}}(Element.prototype),n(i,{loop:t}),n(e,{plugin:i,defaults:g})}()),!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","tinysort"],e):jQuery&&!jQuery.fn.tsort&&e(jQuery,tinysort)}(function(e,t){"use strict";e.tinysort={defaults:t.defaults},e.fn.extend({tinysort:function(){var e,n,i=Array.prototype.slice.call(arguments);i.unshift(this),e=t.apply(null,i),n=e.length;for(var r=0,o=this.length;o>r;r++)n>r?this[r]=e[r]:delete this[r];return this.length=n,this}}),e.fn.tsort=e.fn.tinysort}),function(){var e,t,n,i,r,o,a,s,l=[].slice,d={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var i in t)d.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,i,r,o;if(i=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(r=0,o=n.length;r<o;r++)t=n[r],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,i,r,o,a;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[e],!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(r=o=0,a=i.length;o<a;r=++o)if(n=i[r],n===t){i.splice(r,1);break}return this},e}(),e=function(e){function n(e,t){var r,o,a;if(this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,r=null!=(a=n.optionsForElement(this.element))?a:{},this.options=i({},this.defaultOptions,r,null!=t?t:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=n.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=n.getElements(this.options.clickable,"clickable")),this.init()}var i,r;return u(n,e),n.prototype.Emitter=t,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return a},forceFallback:!1,fallback:function(){var e,t,i,r,o,a;for(this.element.className=""+this.element.className+" dz-browser-not-supported",a=this.element.getElementsByTagName("div"),r=0,o=a.length;r<o;r++)e=a[r],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),i=t.getElementsByTagName("span")[0],i&&(null!=i.textContent?i.textContent=this.options.dictFallbackMessage:null!=i.innerText&&(i.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),i=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,i,r,o,a,s,l,d,u,c,p,h,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),c=e.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=c.length;o<l;o++)t=c[o],t.textContent=this._renameFilename(e.name);for(p=e.previewElement.querySelectorAll("[data-dz-size]"),a=0,d=p.length;a<d;a++)t=p[a],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),i=function(t){return function(i){return i.preventDefault(),i.stopPropagation(),e.status===n.UPLOADING?n.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?n.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),h=e.previewElement.querySelectorAll("[data-dz-remove]"),f=[],s=0,u=h.length;s<u;s++)r=h[s],f.push(r.addEventListener("click",i));return f}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,i,r,o;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,r=o.length;i<r;i++)n=o[i],n.alt=e.name,n.src=t;return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,i,r,o,a;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),o=e.previewElement.querySelectorAll("[data-dz-errormessage]"),a=[],i=0,r=o.length;i<r;i++)n=o[i],a.push(n.textContent=t);return a}},errormultiple:a,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:a,uploadprogress:function(e,t,n){var i,r,o,a,s;if(e.previewElement){for(a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],r=0,o=a.length;r<o;r++)i=a[r],"PROGRESS"===i.nodeName?s.push(i.value=t):s.push(i.style.width=""+t+"%");return s}},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:a,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:a,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,queuecomplete:a,addedfiles:a,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'
},i=function(){var e,t,n,i,r,o,a;for(i=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],o=0,a=n.length;o<a;o++){t=n[o];for(e in t)r=t[e],i[e]=r}return i},n.prototype.getAcceptedFiles=function(){var e,t,n,i,r;for(i=this.files,r=[],t=0,n=i.length;t<n;t++)e=i[t],e.accepted&&r.push(e);return r},n.prototype.getRejectedFiles=function(){var e,t,n,i,r;for(i=this.files,r=[],t=0,n=i.length;t<n;t++)e=i[t],e.accepted||r.push(e);return r},n.prototype.getFilesWithStatus=function(e){var t,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;n<i;n++)t=r[n],t.status===e&&o.push(t);return o},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getAddedFiles=function(){return this.getFilesWithStatus(n.ADDED)},n.prototype.getActiveFiles=function(){var e,t,i,r,o;for(r=this.files,o=[],t=0,i=r.length;t<i;t++)e=r[t],e.status!==n.UPLOADING&&e.status!==n.QUEUED||o.push(e);return o},n.prototype.init=function(){var e,t,i,r,o,a,s;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,r,o;if(n=e.hiddenFileInput.files,n.length)for(r=0,o=n.length;r<o;r++)t=n[r],e.addFile(t);return e.emit("addedfiles",n),i()})}}(this))(),this.URL=null!=(a=window.URL)?a:window.webkitURL,s=this.events,r=0,o=s.length;r<o;r++)e=s[r],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(n){return t(n),e.emit("dragenter",n)}}(this),dragover:function(e){return function(n){var i;try{i=n.dataTransfer.effectAllowed}catch(e){}return n.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",t(n),e.emit("dragover",n)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(n){return t(n),e.drop(n)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(i){return(t!==e.element||i.target===e.element||n.elementInside(i.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,i,r,o,a,s;if(i=0,n=0,e=this.getActiveFiles(),e.length){for(s=this.getActiveFiles(),o=0,a=s.length;o<a;o++)t=s[o],i+=t.upload.bytesSent,n+=t.upload.total;r=100*i/n}else r=100;return this.emit("totaluploadprogress",r,n,i)},n.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},n.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},n.prototype.getFallbackForm=function(){var e,t,i,r;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(i),"FORM"!==this.element.tagName?(r=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:t)},n.prototype.getExistingFallback=function(){var e,t,n,i,r,o;for(t=function(e){var t,n,i;for(n=0,i=e.length;n<i;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},o=["div","form"],i=0,r=o.length;i<r;i++)if(n=o[i],e=t(this.element.getElementsByTagName(n)))return e},n.prototype.setupEventListeners=function(){var e,t,n,i,r,o,a;for(o=this.listeners,a=[],i=0,r=o.length;i<r;i++)e=o[i],a.push(function(){var i,r;i=e.events,r=[];for(t in i)n=i[t],r.push(e.element.addEventListener(t,n,!1));return r}());return a},n.prototype.removeEventListeners=function(){var e,t,n,i,r,o,a;for(o=this.listeners,a=[],i=0,r=o.length;i<r;i++)e=o[i],a.push(function(){var i,r;i=e.events,r=[];for(t in i)n=i[t],r.push(e.element.removeEventListener(t,n,!1));return r}());return a},n.prototype.disable=function(){var e,t,n,i,r;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(this.cancelUpload(e));return r},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t,n,i,r,o,a,s,l;if(i=0,r="b",e>0){for(a=["TB","GB","MB","KB","b"],n=s=0,l=a.length;s<l;n=++s)if(o=a[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){i=e/Math.pow(this.options.filesizeBase,4-n),r=o;break}i=Math.round(10*i)/10}return"<strong>"+i+"</strong> "+r},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},n.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},n.prototype.handleFiles=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;n<i;n++)t=e[n],r.push(this.addFile(t));return r},n.prototype._addFilesFromItems=function(e){var t,n,i,r,o;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?o.push(this.addFile(n.getAsFile())):t.isDirectory?o.push(this._addFilesFromDirectory(t,t.name)):o.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?o.push(this.addFile(n.getAsFile())):o.push(void 0);return o},n.prototype._addFilesFromDirectory=function(e,t){var n,i,r;return n=e.createReader(),i=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0},(r=function(e){return function(){return n.readEntries(function(n){var i,o,a;if(n.length>0){for(o=0,a=n.length;o<a;o++)i=n[o],i.isFile?i.file(function(n){if(!e.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=""+t+"/"+n.name,e.addFile(n)}):i.isDirectory&&e._addFilesFromDirectory(i,""+t+"/"+i.name);r()}return null},i)}}(this))()},n.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(e){var t,n,i;for(n=0,i=e.length;n<i;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){if(e.status!==n.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=n.QUEUED,this.options.autoProcessQueue)return setTimeout(function(e){return function(){return e.processQueue()}}(this),0)},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)},n.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this))},n.prototype.removeFile=function(e){if(e.status===n.UPLOADING&&this.cancelUpload(e),this.files=s(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},n.prototype.removeAllFiles=function(e){var t,i,r,o;for(null==e&&(e=!1),o=this.files.slice(),i=0,r=o.length;i<r;i++)t=o[i],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(i){return function(){return"image/svg+xml"===e.type?(i.emit("thumbnail",e,n.result),void(null!=t&&t())):i.createThumbnailFromUrl(e,n.result,t)}}(this),n.readAsDataURL(e)},n.prototype.createThumbnailFromUrl=function(e,t,n,i){var r;return r=document.createElement("img"),i&&(r.crossOrigin=i),r.onload=function(t){return function(){var i,a,s,l,d,u,c,p;if(e.width=r.width,e.height=r.height,s=t.options.resize.call(t,e),null==s.trgWidth&&(s.trgWidth=s.optWidth),null==s.trgHeight&&(s.trgHeight=s.optHeight),i=document.createElement("canvas"),a=i.getContext("2d"),i.width=s.trgWidth,i.height=s.trgHeight,o(a,r,null!=(d=s.srcX)?d:0,null!=(u=s.srcY)?u:0,s.srcWidth,s.srcHeight,null!=(c=s.trgX)?c:0,null!=(p=s.trgY)?p:0,s.trgWidth,s.trgHeight),l=i.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=n)return n()}}(this),null!=n&&(r.onerror=n),r.src=t},n.prototype.processQueue=function(){var e,t,n,i;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-n));for(;e<t;){if(!i.length)return;this.processFile(i.shift()),e++}}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,i,r;for(i=0,r=e.length;i<r;i++)t=e[i],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;n<i;n++)t=r[n],t.xhr===e&&o.push(t);return o}.call(this)},n.prototype.cancelUpload=function(e){var t,i,r,o,a,s,l;if(e.status===n.UPLOADING){for(i=this._getFilesWithXhr(e.xhr),r=0,a=i.length;r<a;r++)t=i[r],t.status=n.CANCELED;for(e.xhr.abort(),o=0,s=i.length;o<s;o++)t=i[o],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=e.status)!==n.ADDED&&l!==n.QUEUED||(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},r=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var t,o,a,s,l,d,u,c,p,h,f,m,g,v,y,w,b,C,_,x,T,E,F,k,D,S,z,L,A,R,j,U,N,M;for(_=new XMLHttpRequest,x=0,k=e.length;x<k;x++)t=e[x],t.xhr=_;m=r(this.options.method,e),b=r(this.options.url,e),_.open(m,b,!0),_.withCredentials=!!this.options.withCredentials,y=null,a=function(n){return function(){var i,r,o;for(o=[],i=0,r=e.length;i<r;i++)t=e[i],o.push(n._errorProcessing(e,y||n.options.dictResponseError.replace("{{statusCode}}",_.status),_));return o}}(this),w=function(n){return function(i){var r,o,a,s,l,d,u,c,p;if(null!=i)for(o=100*i.loaded/i.total,a=0,d=e.length;a<d;a++)t=e[a],t.upload={progress:o,total:i.total,bytesSent:i.loaded};else{for(r=!0,o=100,s=0,u=e.length;s<u;s++)t=e[s],100===t.upload.progress&&t.upload.bytesSent===t.upload.total||(r=!1),t.upload.progress=o,t.upload.bytesSent=t.upload.total;if(r)return}for(p=[],l=0,c=e.length;l<c;l++)t=e[l],p.push(n.emit("uploadprogress",t,o,t.upload.bytesSent));return p}}(this),_.onload=function(t){return function(i){var r;if(e[0].status!==n.CANCELED&&4===_.readyState){if(y=_.responseText,_.getResponseHeader("content-type")&&~_.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(e){i=e,y="Invalid JSON response from server."}return w(),200<=(r=_.status)&&r<300?t._finished(e,y,i):a()}}}(this),_.onerror=function(t){return function(){if(e[0].status!==n.CANCELED)return a()}}(this),v=null!=(A=_.upload)?A:_,v.onprogress=w,d={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(d,this.options.headers);for(s in d)l=d[s],l&&_.setRequestHeader(s,l);if(o=new FormData,this.options.params){R=this.options.params;for(f in R)C=R[f],o.append(f,C)}for(T=0,D=e.length;T<D;T++)t=e[T],this.emit("sending",t,_,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,_,o),"FORM"===this.element.tagName)for(j=this.element.querySelectorAll("input, textarea, select, button"),E=0,S=j.length;E<S;E++)if(c=j[E],p=c.getAttribute("name"),h=c.getAttribute("type"),"SELECT"===c.tagName&&c.hasAttribute("multiple"))for(U=c.options,F=0,z=U.length;F<z;F++)g=U[F],g.selected&&o.append(p,g.value);else(!h||"checkbox"!==(N=h.toLowerCase())&&"radio"!==N||c.checked)&&o.append(p,c.value);for(u=L=0,M=e.length-1;0<=M?L<=M:L>=M;u=0<=M?++L:--L)o.append(this._getParamName(u),e[u],this._renameFilename(e[u].name));return this.submitRequest(_,o,e)},n.prototype.submitRequest=function(e,t,n){return e.send(t)},n.prototype._finished=function(e,t,i){var r,o,a;for(o=0,a=e.length;o<a;o++)r=e[o],r.status=n.SUCCESS,this.emit("success",r,t,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},n.prototype._errorProcessing=function(e,t,i){var r,o,a;for(o=0,a=e.length;o<a;o++)r=e[o],r.status=n.ERROR,this.emit("error",r,t,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},n}(t),e.version="4.3.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[n(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,i,r,o,a;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?o.push(i.push(t)):o.push(void 0);return o},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),a=[],r=0,o=i.length;r<o;r++)n=i[r],e.optionsForElement(n)!==!1?a.push(new e(n)):a.push(void 0);return a},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,r,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=e.blacklistedBrowsers,i=0,r=o.length;i<r;i++)n=o[i],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},s=function(e,t){var n,i,r,o;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],n!==t&&o.push(n);return o},n=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,i,r,o,a,s,l,d;if(e instanceof Array){r=[];try{for(o=0,s=e.length;o<s;o++)i=e[o],r.push(this.getElement(i,t))}catch(e){n=e,r=null}}else if("string"==typeof e)for(r=[],d=document.querySelectorAll(e),a=0,l=d.length;a<l;a++)i=d[a],r.push(i);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,i,r,o,a;if(!t)return!0;for(t=t.split(","),i=e.type,n=i.replace(/\/.*$/,""),o=0,a=t.length;o<a;o++)if(r=t[o],r=r.trim(),"."===r.charAt(0)){if(e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length)!==-1)return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",r=function(e){var t,n,i,r,o,a,s,l,d,u;for(s=e.naturalWidth,a=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=a,i=n.getContext("2d"),i.drawImage(e,0,0),r=i.getImageData(0,0,1,a).data,u=0,o=a,l=a;l>u;)t=r[4*(l-1)+3],0===t?o=l:u=l,l=o+u>>1;return d=l/a,0===d?1:d},o=function(e,t,n,i,o,a,s,l,d,u){var c;return c=r(t),e.drawImage(t,n,i,o,a,s,l,d,u/c)},i=function(e,t){var n,i,r,o,a,s,l,d,u;if(r=!1,u=!0,i=e.document,d=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",o=function(n){if("readystatechange"!==n.type||"complete"===i.readyState)return("load"===n.type?e:i)[l](s+n.type,o,!1),!r&&(r=!0)?t.call(e,n.type||n):void 0},a=function(){var e;try{d.doScroll("left")}catch(t){return e=t,void setTimeout(a,50)}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&d.doScroll){try{u=!e.frameElement}catch(e){}u&&a()}return i[n](s+"DOMContentLoaded",o,!1),i[n](s+"readystatechange",o,!1),e[n](s+"load",o,!1)}},e._autoDiscoverFunction=function(){if(e.autoDiscover)return e.discover()},i(window,e._autoDiscoverFunction)}.call(this),function(e){var t;if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof exports){try{t=require("jquery")}catch(e){}module.exports=e(t)}else{var n=window.Cookies,i=window.Cookies=e(window.jQuery);i.noConflict=function(){return window.Cookies=n,i}}}(function($){function e(e){return l.raw?e:encodeURIComponent(e)}function t(e){return l.raw?e:decodeURIComponent(e)}function n(t){return e(l.json?JSON.stringify(t):String(t))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(s," ")),l.json?JSON.parse(e):e}catch(e){}}function r(e,t){var n=l.raw?e:i(e);return a(t)?t(n):n}function o(){for(var e,t,n=0,i={};n<arguments.length;n++){t=arguments[n];for(e in t)i[e]=t[e]}return i}function a(e){return"[object Function]"===Object.prototype.toString.call(e)}var s=/\+/g,l=function(i,s,d){if(arguments.length>1&&!a(s)){if(d=o(l.defaults,d),"number"==typeof d.expires){var u=d.expires,c=d.expires=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*u)}return document.cookie=[e(i),"=",n(s),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}for(var p=i?void 0:{},h=document.cookie?document.cookie.split("; "):[],f=0,m=h.length;f<m;f++){var g=h[f].split("="),v=t(g.shift()),y=g.join("=");if(i===v){p=r(y,s);break}i||void 0===(y=r(y))||(p[v]=y)}return p};return l.get=l.set=l,l.defaults={},l.remove=function(e,t){return l(e,"",o(t,{expires:-1})),!l(e)},$&&($.cookie=l,$.removeCookie=l.remove),l});var checkSuccess=function(e){""===e.val()?e.removeClass("success").next("label").removeClass("success"):e.is('input[type="checkbox"], input[type="radio"]')||e.addClass("success").next("label").addClass("success")},formHandleResponse=function(e,t){t.removeClass("loading"),"undefined"!=typeof e.post_id&&t.find('input[name="post-id"]').val(e.post_id),$.event.trigger({type:"formReturn",response:e,target:t})},clearForm=function(e){e.find("input, textarea").each(function(){$(this).is('input[type="hidden"]')||($(this).val(""),$(this).removeProp("checked"))}),e.find(".select-clone").each(function(){$(this).hasClass("cloned")?$(this).remove():$(this).find("option").removeProp("selected")}),e.find(".dz-preview").each(function(){var e=$(this),t=e.attr("data-id");$.ajax({url:ajaxURL,type:"POST",data:{action:"file_upload",delete:t},dataType:"json",success:function(t){e.remove()}})}),e.find(".image-id").remove(),e.find(".file-upload-dz").removeClass("dz-started dz-max-files-reached")},validateForm=function(e){var t=!0;return e.find("input, textarea").each(function(){$(this).hasClass("error")&&(t=!1),($(this).is(":required")&&""===$(this).val()||$(this).hasClass("required")&&""===$(this).val())&&($(this).removeClass("success").addClass("error"),t=!1)}),!!t},validateEmail=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},formJsInit=function(){$("form input, form textarea").each(function(){checkSuccess($(this))}),$("form input, form textarea").each(function(){var e=$(this);checkSuccess(e)}),$("form input, form textarea").off().on("blur",function(e){var t=$(e.target);t.removeClass("error"),checkSuccess(t),t.is('input[type="email"]')&&""!==t.val()&&(validateEmail(t.val())||t.addClass("error"))}),$("form.ajax-form").off().on({keyup:function(e){var t=$(e.target);if(t.removeClass("error").removeClass("success"),t.is('input[type="number"]')){var n=t.val().replace(/[^0-9]/g,"");t.val(n)}if(t.is('input[data-restrict="true"]')){var n=t.val().replace(/[^0-9a-zA-Z ]/g,"");t.val(n)}},click:function(e){var t=$(e.target);if(t.is('input[type="submit"]')){e.preventDefault();var n=t.parents("form"),i=n.attr("action"),r=n.serialize();if(t.hasClass("draft")&&(r+="&draft=draft"),!validateForm(n)){var o=$("input.error, textarea.error").first().offset().top-$(".site-header").innerHeight()-50;$("html,body").animate({scrollTop:o},150),setTimeout(function(){$("input.error, textarea.error").first().focus()},150)}!validateForm(n)||n.hasClass("loading")||n.hasClass("success")||(n.addClass("loading"),$.ajax({url:i,type:"POST",data:r,dataType:"json",success:function(e){formHandleResponse(e,n)}}))}}})};$(function(){formJsInit()});var updatePop=function(e,t){$.ajax({url:ajaxURL,type:"POST",data:{action:"update_pop",post_id:e,value:t},dataType:"json",success:function(e){}})};autosize($("textarea"));var cloneSelect=function(){$(".select-clone").each(function(){var e=$(this),t=e.find("select");add=e.find("a.clone-add"),remove=e.find("a.clone-remove"),add.off().on("click",function(n){n.preventDefault(),"0"!==t.children("option:selected").val()&&e.is(":last-child")&&(e.clone().appendTo(e.parents("fieldset")).addClass("cloned"),cloneSelect())}),remove.off().on("click",function(t){t.preventDefault(),e.is(":first-child")||e.remove()})})};$(function(){cloneSelect()}),$(function(){if($(".fixed-aside").length){var e=0;$(window).on("scroll",function(){var t=$(".fixed-aside"),n=$(".main-section"),i=$(".site-header").innerHeight();n.offset().top<$(window).scrollTop()+i?t.addClass("fixed"):t.removeClass("fixed"),n.offset().top+n.innerHeight()<$(window).scrollTop()+$(window).height()?t.removeClass("fixed").addClass("stop"):t.removeClass("stop");var r=$(this).scrollTop(),o=r-e,a=$(window).innerHeight()+$(window).scrollTop(),s=t.offset().top+t.innerHeight(),l=t.scrollTop()+o;t.hasClass("stop")||(t.hasClass("stop")?t.scrollTop(0):t.scrollTop(l)),e=r}),$(window).load(function(){$(".fixed-aside .inner").innerHeight()>$(window).height()&&$(".main-section").css({minHeight:$(".fixed-aside").innerHeight()})})}}),$(window).on("formReturn",function(e){var t=$(e.target);if(t.is(".registration-form"))if("undefined"!=typeof e.response.error){if(!t.find(".error-span").length){var n=$('<span class="error-span"></span>');n.prependTo(t)}$(".error-span").html(e.response.error)}else window.location.reload()});var player;if($(".home .video-container").length){var $ytplayer=$("#ytplayer"),$wrapper=$(".video-container"),tag=document.createElement("script");tag.src="//www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}var YT_UploadVideo=function(e,t,n,i,r){if(void 0!=e){var o=new XMLHttpRequest;o.addEventListener("load",function(){var t=JSON.parse(o.response),n={snippet:{title:"Atlex video",description:"Atlex",tags:["test"],categoryId:22},status:{privacyStatus:"unlisted"}},i=new MediaUploader({baseUrl:"https://www.googleapis.com/upload/youtube/v3/videos",file:e,token:t.access_token,metadata:n,params:{part:"snippet,status"},onError:function(){document.getElementById("video-statustext").innerHTML="( Upload afbrudt pgrund af fejl )"},onProgress:function(e){document.getElementById("video-statustext").innerHTML="( "+Math.floor(e.loaded/(e.total/100))+"% )"},onComplete:function(e){var t=JSON.parse(e).id;document.getElementById("video-statustext").innerHTML="( Upload frdig )","function"==typeof r&&r(t)}});i.upload()}),o.open("POST","https://www.googleapis.com/oauth2/v4/token"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded");var a="client_id="+t+"&client_secret="+n+"&refresh_token="+i+"&grant_type=refresh_token";o.send(a)}else document.getElementById("video-statustext").innerHTML="( Ingen video valgt )"},videoUploadBtn=document.getElementById("video-upload-btn");null!==videoUploadBtn&&videoUploadBtn.addEventListener("click",function(){$(".ovelse-form").find('input[name="video-id"]').length||YT_UploadVideo(document.getElementById("video-file").files[0],"277088904091-9i70tiqg90t53ev4mu3j6dlfel4ie1h9.apps.googleusercontent.com","4DwvzFwbw4vVrrrxbO0w_rE_","1/BsQrj8Mbtbe48_KBObfskwYtUwesTS-xz75bZIPW5Q8",function(e){$(".ovelse-form").prepend('<input type="hidden" name="video-id" value="'+e+'"/>'),$(".video-preview iframe").attr("src","https://youtube.com/embed/"+e),$(".video-upload").addClass("has-video")})}),$(".video-preview-delete").on("click",function(e){e.preventDefault(),$(".video-upload").removeClass("has-video"),$('input[name="video-id"]').remove();var t=$('input[name="post-id"]').val();"0"!==t&&$.ajax({url:ajaxURL,type:"POST",data:{action:"file_upload",delete:"video-id",post_id:t},dataType:"json",success:function(e){}})});var itemFinderslug="false",itemFinderTime=0,itemFinderRanges=[],itemFinderType="ovelse";$(function(){$("body").on("click",".item-finder-toggle",function(e){e.preventDefault(),$(".item-finder-toggle").removeClass("active"),$("body").removeClass("toggle-aside"),$(this).addClass("active"),itemFinderType=$(this).attr("data-type");var t=itemFinderType;"false"!==itemFinderslug&&"forlob"!==itemFinderType&&(t+="/?filter[type]="+itemFinderslug);var n="ovelse"===itemFinderType?1:2;articlePageToggle(n,"top"),$(".article-page-"+itemFinderType+" article").length||($(".main-section main .article-page-"+itemFinderType).addClass("loading").css("height","400px"),jsRenderModule({endpoint:t,template:"jsTemplate-article",target:".main-section main .article-page-"+itemFinderType,overwrite:!0,addHeader:!0},function(){$(".main-section main .article-page-"+itemFinderType).removeAttr("style"),jio_data_img.scan()}))}),$("body").on("click",".item-finder-list a",function(e){$("body").removeClass("toggle-aside"),$(".item-finder-toggle").removeClass("active"),$(".toggle-ovelse").addClass("active"),itemFinderType="ovelse",articlePageToggle(1,"top"),e.preventDefault();var t=$(this),n=t.parents(".item-finder-list"),i=n.find("ul"),r=i.find(".active"),o=t.parent("li"),a=o.attr("data-slug");r.addClass("trans").removeClass("active"),o.addClass("active");var s=itemFinderType;"false"!==a&&(s+="/?filter[type]="+a),jsRenderModule({endpoint:s,template:"jsTemplate-article",target:".main-section main .article-page-ovelse",overwrite:!0,addHeader:!0},function(){jio_data_img.scan()})})});var current_user;$(function(){var e=$('meta[name="user-id"]');if(e.length){var t=e.attr("content");e.remove(),jsGetJSON("users/"+t,function(e){current_user=e,$.views.helpers({current_user:current_user})})}else $.views.helpers({current_user:!1})});var rangeInput=function(e){var t=$(e.target),n=t.val(),i=t.parent("fieldset"),r=i.find("label"),o=i.find("output");if(i.is(".range-step")){for(var a=void 0!==i.attr("data-steps")?i.attr("data-steps").split(";"):["Nej","Ja"],s,l=100/a.length,d=0,u=a.length;d<u;d++){var c=l*d;n>c&&(s=a[d])}o.html(s)}else if(i.is(".range-postfix")){var a=void 0!==i.attr("data-postfix")?i.attr("data-postfix").split(";"):[""],s;s=1==n?a[0]:void 0!==a[1]?a[1]:a[0],o.html(n+" "+s)}},rangeChange=function(e){var t=$(e.target),n=t.val(),i=t.parent("fieldset"),r=i.find("label"),o=i.find("output");
if(i.is(".range-step"))for(var a=void 0!==i.attr("data-steps")?i.attr("data-steps").split(";"):["Nej","Ja"],s=100/a.length,l,d=0;d<a.length;d++){var u=s*d;n>u&&(l=u+s/2)}},rangeInit=function(){$("fieldset.range input").on({input:function(e){rangeInput(e)},change:function(e){rangeChange(e)}})};$(function(){rangeInit()}),$(function(){if($("body").hasClass("single-forlob")){var e=$(".main-article"),t=".article-page-single",n=null;loadInners(e,t,n)}}),$(function(){$(".site-header-hamburger").click(function(e){e.preventDefault(),$("body").toggleClass("menu-open")})}),$(function(){$(".fixed-aside-toggle").on({click:function(e){e.preventDefault(),$("body").toggleClass("toggle-aside")}})});var toggleArticle=function(e,t,n){if(n===!0&&t.hasClass("post-type-forlob"))e.preventDefault(),articlePageToggle(2,"top");else if(n===!0)e.preventDefault(),t.removeClass("expanded").addClass("collapsed"),$("html,body").animate({scrollTop:t.offset().top-$(".site-header").innerHeight()},100);else if(t.hasClass("inner-article"))e.preventDefault(),$(".inner-article").removeClass("expanded").addClass("collapsed"),t.removeClass("collapsed").addClass("expanded"),$("body").removeClass("toggle-aside"),$("html,body").animate({scrollTop:t.offset().top-$(".site-header").innerHeight()},100),jio_data_img.scan();else if(t.is(".post-type-forlob")){e.preventDefault();var i=".article-page-single";$(i).empty(),$("body").removeClass("toggle-aside"),t.clone().appendTo(i).removeClass("collapsed").addClass("expanded"),articlePageToggle(3,"top"),loadInners(t,i)}else if(t.is(".collapsed")){$("body").removeClass("toggle-aside"),e.preventDefault(),$("main .main-article").removeClass("current expanded").addClass("collapsed"),t.removeClass("collapsed").addClass("current expanded"),$("html,body").animate({scrollTop:t.offset().top-$(".site-header").innerHeight()},100);var r=t.attr("id").replace("post-","")}};$("body").on("click",".main-article.collapsed .article-link",function(e){var t=$(e.target),n=t.parents("article");toggleArticle(e,n,!1)}),$("body").on("click",".main-article.expanded .article-close-link",function(e){var t=$(e.target),n=t.parents("article");toggleArticle(e,n,!0)}),$("body").on("click",".inner-article.collapsed .article-link",function(e){var t=$(e.target),n=t.parents(".inner-article");toggleArticle(e,n)}),$(function(){$("body").on("click",".article-save-post input",function(e){if(!$("body").hasClass("logged-in")){var t=$(".login-link");t.length&&(window.location.href=t.attr("href"))}var n=$(e.target),i=n.context.checked,r=$(e.target).parents("article"),o=r.attr("id").replace("post-",""),a=r.find(".article-saved-count span"),s=a.html(),l=r.find(".article-save-post");i?(s++,r.addClass("saved")):(s--,s<0&&(s=0),r.removeClass("saved")),a.html(s);var d=r.hasClass("post-type-ovelse")?$(".login-ovelse i"):$(".login-forlob i"),u=parseInt(d.html()),c=i?u+1:u-1;d.html(c),$.ajax({url:ajaxURL,type:"POST",data:{action:"save_user_meta",key:"saved_posts",value:o,unique:!1,remove:!i},dataType:"json",success:function(e){}})})}),$(function(){$(".js-menu").on("click",function(e){var t=$(e.target),n=t.attr("href"),i=t.parent("li"),r=i.parents("ul"),o=r.parents("nav");t.is("a, a *")&&(!i.is(".current-menu-parent, .current-menu-item")||i.is(".sub-menu li")||o.is(".sub-nav")?i.is(".sub-menu li")?i.is(".sub-menu li.current-menu-item")?e.preventDefault():i.is(".sub-menu li")&&!o.is(".sub-nav")&&(r.find("li").removeClass("current-menu-item current-menu-parent"),i.addClass("current-menu-item").parents("li").addClass("current-menu-parent open"),e.preventDefault(),toggleArticle(e,$("main").find('a[href="'+n+'"]').parents("article"))):(r.find("li").removeClass("current-menu-item current-menu-parent"),i.addClass("current-menu-item open"),$(this).is(".sub-nav")&&e.preventDefault()):(e.preventDefault(),toggleArticle(e,$("main").find('a[href="'+n+'"]').parents("article")),r.find("li").removeClass("current-menu-item"),i.addClass("current-menu-item")))})}),$(function(){$("jsquery").each(function(){var e=$(this),t={};e.each(function(){$.each(this.attributes,function(){this.specified&&(t[this.name]=this.value)})}),jsRenderModule(t,t.callback)})}),$.views.settings.allowCode(!0);var inputLimit={set:function(e,t,n){var i=e.val().length,r=t-i;r<0&&(r=0),r<11?n.addClass("danger"):n.removeClass("danger"),n.html(r)},init:function(){$("input[maxlength], textarea[maxlength]").each(function(){var e=$(this),t=e.attr("maxlength"),n=e.parent("fieldset");if(0===n.find(".maxlength-count").length){var i=$('<div class="maxlength-count">'+t+"</div>");e.parent("fieldset").append(i)}inputLimit.set(e,t,i),e.on("keyup",function(){inputLimit.set(e,t,i)})})}};$(function(){inputLimit.init()}),$(function(){sortAttach("attach-ovelse-list"),$("body").on("click",".attach-ovelse-item .ovelse-delete",function(e){e.preventDefault();var t=$(e.target).parents("li");t.remove()}),$("body").on("click","#forlob-add-ovelse .add-btn",function(e){e.preventDefault();var t=$('input[name="ovelse-picker-id"]').val(),n=$(e.target).parents("fieldset.typeselect");t&&"undefined"!=typeof t&&"undefined"!=typeof n&&!n.hasClass("invalid")&&(n.addClass("loading"),jsRenderModule({endpoint:"ovelse/"+t,target:".attach-ovelse-list",overwrite:!1,template:"jsTemplate-attach-ovelse"},function(){var e=$("#attach-ovelse-list .ovelse-item-"+t);n.removeClass("loading"),$("html,body").animate({scrollTop:$("#forlob-added-ovelse").offset().top-$(".site-header").height()},200),setAttachInputNames(),setTimeout(function(){e.addClass("blink-out")},200),setTimeout(function(){e.removeClass("blink-out blink")},800)}))})}),$(function(){dropzoneInput()});var articlePageToggle=function(e,t){var n=200;$(".article-pages").attr("data-page",e),"undefined"!=typeof t&&setTimeout(function(){"top"===t?$("html,body").animate({scrollTop:$(".article-pages").offset().top-$(".site-header").innerHeight()},n):$("html,body").animate({scrollTop:$("#"+t).offset().top-$(".site-header").innerHeight()},n)},n)};$(function(){$(".article-page-toggle").on("click",function(e){e.preventDefault();var t=$(this).attr("data-page"),n=$(this).attr("data-nav-to");articlePageToggle(t,n)})});var notify={send:function(e){var t=$(".site-notify");t.length||(t=$('<div class="site-notify hidden"></div>'),$("body").append(t)),"undefined"!=typeof e.message&&(t.append("<span>"+e.message+"</span>").removeClass("hidden").addClass("shown"),"undefined"!=typeof e.timeout&&setTimeout(function(){t.addClass("hidden"),setTimeout(function(){t.removeClass("shown").empty()},500)},1e3*e.timeout))}};$(function(e){$(".clear-ovelse-form").on("click",function(e){e.preventDefault();var t=$(".ovelse-form");articlePageToggle("1","forlob-add-ovelse"),clearForm(t)}),$(".wp-save-to-forlob").on("click",function(e){e.preventDefault();var t=$(this).parents("form");if(validateForm(t)){t.addClass("loading");var n=t.serialize(),i=t.attr("action");n+="&draft=draft",$.ajax({url:i,type:"POST",data:n,dataType:"json",success:function(e){var n=e.post_id;jsRenderModule({endpoint:"ovelse/"+n,target:".attach-ovelse-list",overwrite:!1,template:"jsTemplate-attach-ovelse"},function(){var e=$("#attach-ovelse-list .ovelse-item-"+n),i=e.offset().top,r=$(window).innerHeight()-e.innerHeight()-30;console.log(i,r,i-r),$("html,body").animate({scrollTop:i-r},200),setAttachInputNames(),t.removeClass("loading"),clearForm(t),articlePageToggle("1","forlob-add-ovelse"),setTimeout(function(){e.addClass("blink-out")},200),setTimeout(function(){e.removeClass("blink-out blink")},800)})}})}})}),$(window).on("formReturn",function(e){"publish"===e.response.post_status&&(window.location.href=ajaxURL.replace("wp-admin/admin-ajax.php","?p="+e.response.post_id))}),$(function(){$("fieldset.typeselect").each(function(){typeselect($(this))})}),$.fn.randomize=function(e){for(var t=e?$(this).find(e):$(this).children(),n=t.length;n>=0;n--)$(this).append(t[Math.random()*n|0]);return this},$(function(){var e=100;$("body").on("click",".article-page-header",function(t){t.preventDefault();var n=$(t.target),i=n.parent("a");if(header=n.parents(".article-page-header"),page=header.parents(".article-page"),n.is(".order-by-rand, .order-by-rand *")&&(page.children("article").fadeOut(e),setTimeout(function(){page.randomize("article"),page.children("article").fadeIn(e)},e)),n.is(".order-by-pop, .order-by-pop *")&&(page.children("article").fadeOut(e),setTimeout(function(){page.children("article").tsort({attr:"data-p",order:"desc"}).fadeIn(e)},e)),n.is(".add-new, .add-new *")){var r=$(".site-header-menu .login-link").attr("href");"#"!==i.attr("href")&&"undefined"!=typeof i.attr("href")?r=i.attr("href"):"undefined"!=typeof current_user&&(r+="/edit/",r+=header.hasClass("article-page-header-forlob")?"forlob/":"ovelse/"),window.location.href=r}})});
//# sourceMappingURL=./script-min.js.map
