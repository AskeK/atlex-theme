var checkSuccess=function(a){""===a.val()?a.removeClass("success").next("label").removeClass("stayup"):a.is('input[type="checkbox"], input[type="radio"]')||a.addClass("success").next("label").addClass("stayup")},formHandleResponse=function(a,e){e.removeClass("loading"),$.event.trigger({type:"formReturn",response:a,target:e})},validateForm=function(a){var e=!0;return a.find("input, textarea").each(function(){$(this).hasClass("error")&&(e=!1),($(this).is(":required")&&""===$(this).val()||$(this).hasClass("required")&&""===$(this).val())&&($(this).removeClass("success").addClass("error"),e=!1)}),!!e},validateEmail=function(a){var e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e.test(a)},formJsInit=function(){$("form input, form textarea").each(function(){checkSuccess($(this))}),autosize($("form textarea:not(.no-autosize)")),$("form input, form textarea").each(function(){var a=$(this);checkSuccess(a)}),$("form input, form textarea").off().on("blur",function(a){var e=$(a.target);e.removeClass("error"),checkSuccess(e),e.is('input[type="email"]')&&""!==e.val()&&(validateEmail(e.val())||e.addClass("error"))}),$("form").off().on({keyup:function(a){var e=$(a.target);if(e.removeClass("error").removeClass("success"),e.is('input[type="number"]')){var s=e.val().replace(/[^0-9]/g,"");e.val(s)}if(e.is('input[data-restrict="true"]')){var s=e.val().replace(/[^0-9a-zA-ZÆØÅæøå ]/g,"");e.val(s)}},click:function(a){var e=$(a.target);if(e.is(".submit")){a.preventDefault();var s=e.parents("form"),t=s.attr("action"),r=s.serialize();!validateForm(s)||s.hasClass("loading")||s.hasClass("success")||(s.addClass("loading"),$.ajax({url:t,type:"POST",data:r,dataType:"json",success:function(a){formHandleResponse(a,s)}}))}}})};$(function(){formJsInit()});
